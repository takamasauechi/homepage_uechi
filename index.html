<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="reset.css" />
        <link rel="stylesheet" href="style.css" />
        <title>英ホーム株式会社</title>
    </head>
    <body>
        <div id="intro">
            <div class="intro-logo"></div>
            <span class="intro-text">SUGURU HOME CO.,LTD.</span>
        </div>
        <header class="head1">
            <div class="menu-container">
                <div class="home-icon2">
                    <a
                        class="home-link"
                        href="http://localhost/suguru/index.html"
                    >
                        <div class="home-icon">
                            <div class="home-icon3"></div>
                        </div>
                    </a>
                </div>
                <div class="menu-button" id="menu-button">
                    <span></span>
                    <span></span>
                    <span></span>
                    <p class="menu-text" id="menu-text">Menu</p>
                </div>
            </div>
            <div class="slide-overlay" id="slide-overlay">
                <nav class="menu-nav">
                    <ul>
                        <li><a href="#">トップ</a></li>
                        <li><a href="#">英ホームについて</a></li>
                        <li><a href="#">英ホームができること</a></li>
                        <li>
                            <a href="#">内装</a>
                            <a href="#">外装</a>
                            <a href="#">店舗</a>
                        </li>
                        <li><a href="#">リフォーム通信</a></li>
                        <li><a href="#">採用情報</a></li>
                        <li><a href="#">お問い合わせ</a></li>
                    </ul>
                </nav>
            </div>
            <div class="slide-menu" id="slide-menu"></div>
            <div class="slideshow">
                <div
                    class="slide"
                    style="background-image: url('./img/top1.jpg')"
                >
                    <div class="overlay"></div>
                </div>
                <div
                    class="slide"
                    style="background-image: url('./img/top2.jpg')"
                >
                    <div class="overlay"></div>
                </div>
                <div
                    class="slide"
                    style="background-image: url('./img/top3.jpg')"
                >
                    <div class="overlay"></div>
                </div>
            </div>
            <div class="suguru-logo1">
                <div class="intro-logo"></div>
                <span class="intro-text">SUGURU HOME CO.,LTD.</span>
                <h1 class="suguru-logo1-company-name">英ホーム株式会社</h1>
                <p class="suguru-logo1-company-policy">
                    <span>ーお客様の思いをカタチにー</span>
                </p>
            </div>
            <div class="scroll"></div>
        </header>

        <main class="main">
            <div
                class="suguru-info flipLeftTopTrigger"
                style="background-image: url('./img/cyakou.webp')"
            >
                <div class="memo-container">
                    <div class="memo-text">
                        <h3 class="introduction">英ホームについて</h3>
                        <p class="ptag">About</p>
                        <p class="introduction-text">
                            英ホーム株式会社は大阪府大阪市に拠点を置き、リフォームを通して快適な暮らしのお手伝いをしています。
                        </p>
                        <div class="link-container">
                            <a href="info.html" class="link"
                                >英ホームについて<span class="arrow">→</span></a
                            >
                        </div>
                    </div>
                    <div
                        class="memo-photo"
                        style="background-image: url('./img/reform3.jpg')"
                    ></div>
                </div>
                <div class="famous">
                    <span class="famous-main">住まい刷新</span>
                    <span class="famous-sub">Home renovation</span>
                </div>
            </div>
            <section class="works-main">
                <div class="works-main-wrapper">
                    <div class="works-main-content">
                        <div class="works-main-content-text">
                            <span class="main-content-text2">works</span>
                            <h2 class="main-content-text1">
                                英ホームができること
                            </h2>
                        </div>
                        <div class="works-main-photo">
                            <div class="works-main-photo-filter"></div>
                        </div>

                        <div class="works-main-photo-slide"></div>
                        <div class="works-main-back"></div>
                    </div>
                    <div class="works-main-memo">
                        <h2 class="works-main-memo-text1">
                            伝統技術と<br />新技術の創造
                        </h2>
                        <hr class="horizontal-line" />
                        <p class="works-main-memo-text2">
                            英ホームでは内装リフォームに加え、外装・店舗、リフォーム・構築も展開しています。
                        </p>
                        <div class="works-main-memo-link">
                            <a href="#"
                                >英ホームができること<span class="arrow2"
                                    >→</span
                                ></a
                            >
                        </div>
                    </div>
                </div>
                <section class="works-Interior">
                    <div class="works-Interior-text">
                        <h2 class="works-Interior-text1">内装リフォーム</h2>
                        <span class="works-Interior-text1-1">works 01</span>
                        <p class="works-Interior-text2">
                            大阪市、大阪府、の発注リフォーム工事を中心に、国際規格(ISO
                            9001)に準拠した、高品質な仕上がりを実現するため、厳しい品質管理を実施しています。
                        </p>

                        <div class="works-Interior-link">
                            <a href="#"
                                >内装リフォーム工事<span class="Interior-arrow"
                                    >→</span
                                ></a
                            >
                        </div>
                    </div>
                    <div class="works-Interior-image">
                        <div class="works-Interior-image1"></div>
                    </div>
                </section>
                <section class="works-exterior">
                    <div class="works-exterior-image">
                        <div class="works-exterior-image1"></div>
                    </div>
                    <div class="works-exterior-text">
                        <h2 class="works-exterior-text1">外装リフォーム</h2>
                        <span class="works-exterior-text1-1">works 02</span>
                        <p class="works-exterior-text2">
                            外装リフォーム工事では、住まいの外観を美しく耐久性も向上させ、地域のニーズに応えるサービスを提供しています。
                        </p>

                        <div class="works-exterior-link">
                            <a href="#"
                                >外装リフォーム工事<span class="exterior-arrow"
                                    >→</span
                                ></a
                            >
                        </div>
                    </div>
                </section>
                <section class="works-store">
                    <div class="works-Interior-text">
                        <h2 class="works-store-text1">店舗リフォーム</h2>
                        <span class="works-store-text1-1">works 01</span>
                        <p class="works-store-text2">
                            お店の雰囲気と機能性を高め、魅力的な空間を実現します。
                        </p>

                        <div class="works-store-link">
                            <a href="#"
                                >店舗リフォーム工事<span class="store-arrow"
                                    >→</span
                                ></a
                            >
                        </div>
                    </div>
                    <div class="works-store-image">
                        <div class="works-store-image1"></div>
                    </div>
                </section>
            </section>
            <div id="instagram-feed"></div>
            <section class="willingness">
                <div class="willingness-image">
                    <div class="willingness-image-text">
                        <span class="willingness-main">くらしをつくる</span>
                        <span class="willingness-sub">create a life</span>
                    </div>
                </div>
            </section>
            <section class="recruit">
                <div class="recruit-message">
                    <h3 class="recruit-title">採用情報</h3>
                    <p class="recruit-title2">Recruit</p>
                    <span class="recruit-article"
                        >英ホームでは、皆様の快適な暮らしを一緒につくる仲間を募集しています。<br />
                        「リフォームを通して、その人の暮らしに貢献したい」という熱意のある方、是非ご応募ください。</span
                    >
                    <div class="recruit-link">
                        <a href="recruit.html"
                            ><span class="recruit-saiyou">採用情報</span
                            ><span class="recruit-arrow">→</span></a
                        >
                    </div>
                </div>
            </section>
            <div class="map">
                <div class="map-image">
                    <div class="map-text">
                        <div class="map-text-inner">
                            <h3 class="map-title">英ホーム株式会社</h3>
                            <dl class="map-data-desc">
                                <dt class="map-data-desc-long">所在地</dt>
                                <dd>
                                    〒551-0061
                                    大阪府大阪市大正区三軒家西1-22-25-101
                                </dd>
                                <dt>営業時間</dt>
                                <dd>平日9:00〜17:00</dd>
                                <dt>お問合せ</dt>
                                <dd>info@suguruhome.co.jp</dd>
                            </dl>
                            <p class="map-link">
                                <a
                                    href="https://www.google.com/maps/dir/?api=1&amp;destination=%E5%A4%A7%E9%98%AA%E5%BA%9C%E5%A4%A7%E9%98%AA%E5%B8%82%E5%A4%A7%E6%AD%A3%E5%8C%BA%E4%B8%89%E8%BB%92%E5%AE%B6%E8%A5%BF1-22-25-101"
                                    target="_blank"
                                    >地図を見る<span class="map-arrow"
                                        >→</span
                                    ></a
                                >
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer id="footer">
            <div class="footer-inner">
                <div class="footer-left">
                    <div class="footer-other">
                        <p>
                            <a href="privacy-policy.html"
                                >プライバシーポリシー</a
                            >
                        </p>
                        <div class="footer-divider"></div>
                        <p><a href="contact.html">お問い合わせ</a></p>
                    </div>
                    <div class="footer-copy">
                        <div class="copyright">
                            ©Suguru Home, Inc. All Rights Reserved.
                        </div>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="pagetop">
                        <a href="#" class="pagetop-link">
                            <span class="pagetop-icon"></span>
                        </a>
                    </div>
                </div>
            </div>
        </footer>
        <div class="contact-link">
            <a href="contact.html">
                <span class="icon"></span>
                contact
            </a>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                window.scrollTo(0, 0);

                var introElement = document.getElementById("intro");
                var headerElement = document.querySelector("header");
                var introTextElement =
                    document.querySelector("#intro .intro-text");
                var introLogoElement =
                    document.querySelector("#intro .intro-logo");
                var menuContainer = document.querySelector(".menu-container");

                function showIntro() {
                    introElement.style.display = "flex";
                    setTimeout(showIntroText, 1500);
                }

                function showIntroText() {
                    if (introTextElement) {
                        introTextElement.classList.add("show");
                    } else {
                        console.warn("introTextElement not found");
                    }
                }

                function hideIntro() {
                    introElement.style.display = "none";
                    headerElement.style.display = "flex";

                    var suguruLogo1 = document.querySelector(".suguru-logo1");

                    if (suguruLogo1) {
                        replaceLogoAndText(suguruLogo1);
                    } else {
                        console.warn("suguruLogo1 not found");
                    }

                    showMainContent();
                    animateContactLink();
                }

                function replaceLogoAndText(suguruLogo1) {
                    var existingLogo = suguruLogo1.querySelector(".intro-logo");
                    if (existingLogo) {
                        suguruLogo1.removeChild(existingLogo);
                    }

                    var existingText = suguruLogo1.querySelector(".intro-text");
                    if (existingText) {
                        suguruLogo1.removeChild(existingText);
                    }

                    suguruLogo1.insertBefore(
                        introLogoElement,
                        suguruLogo1.firstChild
                    );
                    suguruLogo1.insertBefore(
                        introTextElement,
                        suguruLogo1.firstChild.nextSibling
                    );
                }

                function showMainContent() {
                    document.querySelector("main").style.display = "block";
                    document.querySelector("footer").style.display = "block";
                }

                function animateContactLink() {
                    const contactLink = document.querySelector(".contact-link");
                    if (contactLink) {
                        console.log("contactLink found");
                        contactLink.classList.add("slide-in");
                    } else {
                        console.warn("contact-link not found");
                    }
                }

                if (menuContainer) {
                    menuContainer.style.left = "-46%";
                    setTimeout(function () {
                        menuContainer.style.left = "0";
                    }, 4320);
                }

                showIntro();
                setTimeout(hideIntro, 4300);

                var menuButton = document.getElementById("menu-button");
                var slideMenu = document.getElementById("slide-menu");
                var menuText = document.getElementById("menu-text");
                var overlay = document.getElementById("slide-overlay");

                if (menuButton && slideMenu && menuText && overlay) {
                    menuButton.addEventListener("click", function () {
                        if (menuButton.classList.contains("active")) {
                            overlay.classList.add("slide-out");
                            slideMenu.classList.add("slide-out");
                            setTimeout(function () {
                                overlay.classList.remove("active", "slide-out");
                                slideMenu.classList.remove(
                                    "active",
                                    "slide-out"
                                );
                            }, 500);
                        } else {
                            overlay.classList.remove("slide-out");
                            slideMenu.classList.remove("slide-out");
                            overlay.classList.add("active");
                            setTimeout(function () {
                                slideMenu.classList.add("active");
                            }, 500);
                        }
                        menuButton.classList.toggle("active");
                        menuText.textContent = menuButton.classList.contains(
                            "active"
                        )
                            ? "close"
                            : "menu";
                    });
                }

                function syncAnimation() {
                    var elements = document.querySelectorAll(
                        ".intro-text, .menu-container, .contact-link"
                    );
                    var windowHeight = window.innerHeight;

                    elements.forEach(function (element) {
                        var elementTop = element.getBoundingClientRect().top;
                        var elementHeight =
                            element.getBoundingClientRect().height;

                        if (
                            elementTop + elementHeight < 0 ||
                            elementTop > windowHeight
                        ) {
                            element.classList.remove("visible");
                        } else {
                            element.classList.add("visible");
                        }
                    });
                }

                const footer = document.getElementById("footer");
                const contactLink = document.querySelector(".contact-link");

                function checkFooterVisibility() {
                    // contactLinkがnullでないことを確認
                    if (contactLink) {
                        const footerRect = footer.getBoundingClientRect();
                        const windowHeight =
                            window.innerHeight ||
                            document.documentElement.clientHeight;

                        if (footerRect.top <= windowHeight) {
                            contactLink.classList.add("rotate-out");
                        } else {
                            contactLink.classList.remove("rotate-out");
                            contactLink.classList.add("rotate-in");
                        }
                    } else {
                        console.warn("contact-link not found");
                    }
                }

                window.addEventListener("scroll", checkFooterVisibility);
                checkFooterVisibility();

                function checkAnimation() {
                    $(".flipLeftTopTrigger").each(function () {
                        var elemTop = $(this).offset().top;
                        var elemBottom = elemTop + $(this).outerHeight();
                        var windowTop = $(window).scrollTop();
                        var windowBottom = windowTop + $(window).height();

                        var isInViewport =
                            (elemTop >= windowTop && elemTop <= windowBottom) ||
                            (elemBottom >= windowTop &&
                                elemBottom <= windowBottom);

                        if (isInViewport) {
                            $(this).addClass("flipLeftTop visible");
                            $(this)
                                .find(".memo-container,.famous")
                                .addClass("visible");
                        } else {
                            $(this).removeClass("flipLeftTop visible");
                            $(this)
                                .find(".memo-container,.famous")
                                .removeClass("visible");
                        }
                    });

                    $(".map-text").each(function () {
                        var elemTop = $(this).offset().top;
                        var elemBottom = elemTop + $(this).outerHeight();
                        var windowTop = $(window).scrollTop();
                        var windowBottom = windowTop + $(window).height();

                        var isInViewport =
                            (elemTop >= windowTop && elemTop <= windowBottom) ||
                            (elemBottom >= windowTop &&
                                elemBottom <= windowBottom);

                        if (isInViewport) {
                            $(this).addClass("visible");
                        } else {
                            $(this).removeClass("visible");
                        }
                    });
                }
                window.addEventListener("scroll", syncAnimation);
                window.addEventListener("scroll", checkAnimation);
                syncAnimation();
                checkAnimation();

                window.addEventListener("scroll", function () {
                    var slide = document.querySelector(
                        ".works-main-photo-slide"
                    );
                    var filter = document.querySelector(
                        ".works-main-photo-filter"
                    );
                    var back = document.querySelector(".works-main-back");
                    var mainContentText = document.querySelector(
                        ".works-main-content-text"
                    );
                    var mainMemo = document.querySelector(".works-main-memo");

                    if (
                        !slide ||
                        !back ||
                        !filter ||
                        !mainContentText ||
                        !mainMemo
                    )
                        return;

                    var slideRect = slide.getBoundingClientRect();
                    var backRect = back.getBoundingClientRect();
                    var windowHeight = window.innerHeight;

                    if (
                        slideRect.top <= windowHeight - 10 &&
                        slideRect.bottom >= 10
                    ) {
                        slide.classList.add("hidden");
                        filter.classList.add("hidden");
                    } else {
                        slide.classList.remove("hidden");
                        filter.classList.remove("hidden");
                    }

                    if (
                        backRect.top <= windowHeight - 13 &&
                        backRect.bottom >= 13
                    ) {
                        back.classList.add("hidden");
                    } else {
                        back.classList.remove("hidden");
                    }

                    if (
                        backRect.top <= windowHeight - 13 &&
                        backRect.bottom >= 13
                    ) {
                        mainContentText.classList.add("visible");
                        mainMemo.classList.add("visible");
                    } else {
                        mainContentText.classList.remove("visible");
                        mainMemo.classList.remove("visible");
                    }
                });
                $(document).ready(function () {
                    function updateTransform() {
                        $(
                            ".works-Interior-text, .works-exterior-text, .works-store-text"
                        ).each(function () {
                            var sectionOffset = $(this)
                                .closest("section")
                                .offset().top;
                            var scrollTop = $(window).scrollTop();
                            var translateY = (scrollTop - sectionOffset) * 0.1;
                            var windowHeight = $(window).height();
                            var maxTranslateY = windowHeight * 0.1;

                            if (translateY > maxTranslateY)
                                translateY = maxTranslateY;
                            if (translateY < -maxTranslateY)
                                translateY = -maxTranslateY;

                            $(this).css(
                                "transform",
                                "translateY(" + translateY + "px)"
                            );
                        });
                    }

                    // 初期化時とスクロール時にupdateTransformを呼び出す
                    $(window).on("scroll", function () {
                        updateTransform();
                        // 可視性のチェックを行う
                        checkVisibility();
                    });
                    updateTransform();
                });

                // 可視性をチェックする関数
                function checkVisibility() {
                    const elements = document.querySelectorAll(
                        ".works-Interior-text, .works-exterior-text, .works-store-text"
                    );
                    elements.forEach((element) => {
                        const rect = element.getBoundingClientRect();
                        if (
                            rect.top <= window.innerHeight - 5 &&
                            rect.bottom >= 5
                        ) {
                            element.classList.add("show");
                        } else {
                            element.classList.remove("show");
                        }
                    });
                }

                // ブログ
                // ブログ
                // ブログ

                const endpoint = "https://graph.instagram.com/me/media";
                // アクセストークン
                const accessToken =
                    "EAASqje2QhZC4BOZCfMl7ZBhl0n6ZBZBZCv7Ghghi19dWGQu3g7aUG2riEkf8NZAVPHqnopD7gNAZCTjSKqjmnSbD0u2bEOAGMXjCy3ZCS4sVQ8w4ZC3rQ8rOKE79QAXSxvCE86xrnPniceTkF8CmZBM0PXQXDKEJkevNtRLcxfdp7ulpaaGW5APHeH8r9TaUNBt6dEV";

                // Instagramの投稿を取得して表示する関数
                async function getInstagramPosts() {
                    try {
                        const response = await fetch(
                            `${endpoint}?fields=id,media_type,media_url,permalink&access_token=${accessToken}`
                        );
                        const data = await response.json();

                        // 取得した投稿を表示する
                        data.data.forEach((post) => {
                            const postElement = document.createElement("div");
                            postElement.innerHTML = `
        <a href="${post.permalink}" target="_blank">
          <img src="${post.media_url}" alt="Instagram Post">
        </a>
      `;
                            document
                                .getElementById("instagram-feed")
                                .appendChild(postElement);
                        });
                    } catch (error) {
                        console.error("エラーが発生しました:", error);
                    }
                }

                // ページが読み込まれたときにInstagramの投稿を取得する
                window.onload = getInstagramPosts;

                // ブログ
                // ブログ
                // ブログ
                // ブログ

                window.addEventListener("scroll", function () {
                    var element = document.querySelector(
                        ".willingness-image-text"
                    );

                    if (element) {
                        var position = element.getBoundingClientRect();

                        // 要素がビューポート内に表示されているかどうかを確認
                        if (
                            (position.top <= window.innerHeight &&
                                position.bottom >= 0) ||
                            (position.bottom >= 0 &&
                                position.top <= window.innerHeight)
                        ) {
                            // ビューポート内に表示されている場合は.visibleクラスを追加
                            element.classList.add("visible");
                        } else {
                            // ビューポート外に表示されている場合は.visibleクラスを削除
                            element.classList.remove("visible");
                        }
                    }
                });

                var pagetopLink = document.querySelector(".pagetop-link");

                // ページのトップまでスクロールする関数を定義
                function scrollToTop() {
                    window.scrollTo({
                        top: 0,
                        behavior: "smooth", // スムーズにスクロールする
                    });
                }

                // クリックイベントを追加して、ページのトップまでスクロールする
                pagetopLink.addEventListener("click", function (event) {
                    event.preventDefault(); // デフォルトのクリックイベントをキャンセル
                    scrollToTop(); // ページのトップまでスクロール
                });
            });
        </script>
    </body>
</html>
